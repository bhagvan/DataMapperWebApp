<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <title>Data Mapper tooling</title>
        <script src="assets/lib/d3/d3.js"></script>
        <script src="assets/lib/jQuery/jquery-3.1.0.js"></script>

        <script src="assets/lib/jquery-ui-1.12.0.custom/jquery-ui.js"></script>

        <script src="assets/lib/underscore/underscore_1.8.3.js" type="text/javascript"></script>
        <script src="assets/lib/backbone/backbone_1.3.3.js" type="text/javascript"></script>
        <script src="assets/fileHandler.js"></script>
        <link rel="stylesheet" href="assets/style.css">


    </head>

    <body>


        <div id="file-load">
            <div class="file-load-container" id="input-file-load-container">
                <button id="load-input-btn">Load input</button>
                <button id="clear-input-btn">Clear input</button>

                <div class="load-file" id="load-input">
                    <input type="file" class="file-select input" id="input-file-select" name="input-select[]" accept=".json"/>
                    <div class="file-drag input" id="input-file-drag">or drop files here</div>
                </div>

            </div>

            <div class="file-load-container" id="output-file-load-container">
                <button id="load-output-btn">Load output</button>
                <button id="clear-output-btn">Clear output</button>

                <div class="load-file" id="load-output">
                    <input type="file" class="file-select output" id="output-file-select" name="output-select[]"
                           accept=".json"/>
                    <div class="file-drag output" id="output-file-drag">or drop files here</div>
                </div>

            </div>
        </div>

        <div id="op-panel">
            <button id="concat-op-btn">Add concat operator <br> 2 to 1</button>
        </div>

        <div id="canvas-container">
            <svg id="canvas" class="canvas" width="1800" height="500">
            <g id="input-container" transform="translate(40,40)" class="container">

            <g id="input-container-fo" class="container-fo">
            <rect class="container-title-outline" id="input-container-title-outline" height="20" fill="#77C1C0"
                  stroke="black"></rect>
            <text class="container-title" id="input-container-title" font-weight="bold">Input</text>
            <rect class="container-outline" id="input-container-outline" height="10" fill="none"
                  stroke="black"></rect>
            </g>
            </g>


            <g id="output-container" transform="translate(800,40)" class="container">
            <g id="output-container-fo" class="container-fo">
            <rect class="container-title-outline" id="output-container-title-outline" height="20" fill="#E59CA5"
                  stroke="black"></rect>
            <text class="container-title" id="output-container-title" font-weight="bold">Output</text>
            <rect class="container-outline" id="output-container-outline" height="10" fill="none"
                  stroke="black"></rect>
            </g>

            </g>

            </svg>

        </div>
        <button onclick="showMappings()">showMappings</button>
        <!--<svg width="220" height="120" viewBox="0 0 220 120" id="package">-->
        <!--<rect x="10" y="10" width="200" height="100" fill="none" stroke="black"/>-->
        <!--&lt;!&ndash;<foreignObject x="15" y="15" width="190" height="90">&ndash;&gt;-->
        <!--&lt;!&ndash;<div xmlns="http://www.w3.org/1999/xhtml" style="width:190px; height:90px; overflow-y:auto"><b>This</b> is the <i>text</i> I wish to fit inside <code>rect</code></div>&ndash;&gt;-->
        <!--&lt;!&ndash;</foreignObject>&ndash;&gt;-->
        <!--</svg>-->

        <script>
            //    var group = d3.select("#package");
            //    var fo = group.append("foreignObject").attr("x", 15).attr("y", 15).attr("width", 190).attr("height", 40);
            //    fo.append("xhtml:div").attr("style","overflow-y:hidden").attr("xmlns", "http://www.w3.org/1999/xhtml").text("Thiggfis the dgdexsgsggs wish to fit insidegssgsgs");


            //app object
            var DataMapper = {
                Models: {},
                Collections: {}
            };

            DataMapper.Models.Connector = Backbone.Model.extend({
                val: 5,
                initialize: function () {
                    this.set('val', 3);
                }
            });

            //collections
            DataMapper.Collections.Connectors = Backbone.Collection.extend({
                model: DataMapper.Models.Connector,
                url: "/connectors"
            });

            var con = new DataMapper.Models.Connector();
            var set = new DataMapper.Collections.Connectors([con]);

            function showMappings() { //on button click
                console.log("button click");
                var fil = set.filter(d=>d.get('val') === 3);
                console.log(fil);
            }


        </script>


    </body>

</html>